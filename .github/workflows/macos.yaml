name: Workrave dependencies

on:
  push:
    branches: main
  workflow_dispatch:

jobs:
  boost:
    runs-on: macos-latest
    name: build Boost

    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Build Boost
        run: |
          ./build-boost.sh

  fmt_and_spdlog:
    runs-on: macos-latest
    name: build Fmt/Spdlog

    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Setup build env
        run: |
          brew install ninja
          brew outdated cmake || brew upgrade cmake

      - name: Build Fmt
        run: |
          ./build-fmt.sh

      - name: Build Spdlog
        run: |
          ./build-spdlog.sh

  qt:
    runs-on: macos-latest
    name: build Qt

    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Setup build env
        run: |
          brew install ninja
          brew outdated cmake || brew upgrade cmake

      - name: Build Qt
        run: |
          ./build-qt.sh
